# -*- coding: utf-8 -*- # FADO CRM Demo Data Creator - Tao du lieu mau sieu cool! # Script nay se tao du lieu demo de test he thong nhu mot pro! import sys import os # Thiet lap UTF-8 encoding cho Windows if os.name == 'nt': # Windows os.system('chcp 65001 > nul') import random from datetime import datetime, timedelta from sqlalchemy.orm import sessionmaker from database import engine, create_tables from models import * # Tao session Session = sessionmaker(bind=engine) def create_demo_customers(): """Tao khach hang demo voi data that nhu the""" session = Session() customers_data = [ { "ho_ten": "Nguyen Van Anh", "email": "nguyenvananh@gmail.com", "so_dien_thoai": "0987654321", "dia_chi": "123 Duong ABC, Quan 1, TP.HCM", "loai_khach": LoaiKhachHang.VIP, "tong_tien_da_mua": 50000000.0, "so_don_thanh_cong": 15, "ghi_chu": "Khach VIP tu 2022, rat uy tin" }, { "ho_ten": "Tran Thi Binh", "email": "tranthibinh@yahoo.com", "so_dien_thoai": "0912345678", "dia_chi": "456 Duong XYZ, Quan 3, TP.HCM", "loai_khach": LoaiKhachHang.THAN_THIET, "tong_tien_da_mua": 25000000.0, "so_don_thanh_cong": 8, "ghi_chu": "Khach thuong xuyen mua my pham" }, { "ho_ten": "Le Minh Cuong", "email": "leminhcuong@hotmail.com", "so_dien_thoai": "0909123456", "dia_chi": "789 Duong DEF, Quan 7, TP.HCM", "loai_khach": LoaiKhachHang.MOI, "tong_tien_da_mua": 3500000.0, "so_don_thanh_cong": 2, "ghi_chu": "Khach moi, quan tam den do cong nghe" }, { "ho_ten": "Pham Thu Ha", "email": "phamthuha@gmail.com", "so_dien_thoai": "0976543210", "dia_chi": "321 Duong GHI, Quan Binh Thanh, TP.HCM", "loai_khach": LoaiKhachHang.THAN_THIET, "tong_tien_da_mua": 18000000.0, "so_don_thanh_cong": 6, "ghi_chu": "Thich mua quan ao va phu kien" }, { "ho_ten": "Hoang Van Duc", "email": "hoangvanduc@gmail.com", "so_dien_thoai": "0931234567", "dia_chi": "654 Duong JKL, Quan 2, TP.HCM", "loai_khach": LoaiKhachHang.MOI, "tong_tien_da_mua": 1200000.0, "so_don_thanh_cong": 1, "ghi_chu": "Khach moi, lan dau mua ho" } ] customers = [] for data in customers_data: customer = KhachHang(**data) session.add(customer) customers.append(customer) session.commit() print(f" Da tao {len(customers)} khach hang demo!") return customers def create_demo_products(): """ Tao san pham demo voi da dang loai hang""" session = Session() products_data = [ { "ten_san_pham": "iPhone 15 Pro Max 256GB", "link_goc": "https://www.apple.com/iphone-15-pro/", "gia_goc": 1199.0, "gia_ban": 32000000.0, "mo_ta": "iPhone moi nhat voi chip A17 Pro, camera titanium", "hinh_anh_url": "https://example.com/iphone15.jpg", "trong_luong": 0.2, "kich_thuoc": "159.9 x 76.7 x 8.25 mm", "danh_muc": "Dien thoai", "quoc_gia_nguon": "My" }, { "ten_san_pham": "Nike Air Jordan 1 High", "link_goc": "https://www.nike.com/air-jordan-1", "gia_goc": 170.0, "gia_ban": 4500000.0, "mo_ta": "Giay sneaker iconic cua Jordan Brand", "hinh_anh_url": "https://example.com/jordan1.jpg", "trong_luong": 0.8, "kich_thuoc": "Size 42", "danh_muc": "Giay dep", "quoc_gia_nguon": "My" }, { "ten_san_pham": "Chanel No.5 Eau de Parfum", "link_goc": "https://www.chanel.com/perfume", "gia_goc": 132.0, "gia_ban": 3800000.0, "mo_ta": "Nuoc hoa iconic cua Chanel, mui huong sang trong", "hinh_anh_url": "https://example.com/chanel5.jpg", "trong_luong": 0.1, "kich_thuoc": "50ml", "danh_muc": "My pham", "quoc_gia_nguon": "Phap" }, { "ten_san_pham": "MacBook Pro M3 14 inch", "link_goc": "https://www.apple.com/macbook-pro-14/", "gia_goc": 1999.0, "gia_ban": 52000000.0, "mo_ta": "Laptop Pro voi chip M3, hieu nang dinh cao", "hinh_anh_url": "https://example.com/macbook.jpg", "trong_luong": 1.6, "kich_thuoc": "31.26 x 22.12 x 1.55 cm", "danh_muc": "Laptop", "quoc_gia_nguon": "My" }, { "ten_san_pham": "Louis Vuitton Speedy 30", "link_goc": "https://us.louisvuitton.com/speedy-30", "gia_goc": 1570.0, "gia_ban": 42000000.0, "mo_ta": "Tui xach nu iconic cua LV, da monogram", "hinh_anh_url": "https://example.com/lvspeedy.jpg", "trong_luong": 0.5, "kich_thuoc": "30 x 21 x 17 cm", "danh_muc": "Tui xach", "quoc_gia_nguon": "Phap" }, { "ten_san_pham": "Sony WH-1000XM5 Headphones", "link_goc": "https://www.sony.com/headphones", "gia_goc": 399.0, "gia_ban": 10500000.0, "mo_ta": "Tai nghe chong on tot nhat the gioi", "hinh_anh_url": "https://example.com/sony.jpg", "trong_luong": 0.25, "kich_thuoc": "Foldable design", "danh_muc": " m thanh", "quoc_gia_nguon": "Nhat Ban" } ] products = [] for data in products_data: product = SanPham(**data) session.add(product) products.append(product) session.commit() print(f" Da tao {len(products)} san pham demo!") return products def create_demo_orders(customers, products): """ Tao don hang demo voi cac trang thai khac nhau""" session = Session() # Danh sach trang thai de random statuses = list(TrangThaiDonHang) orders = [] for i in range(10): # Random chon khach hang customer = random.choice(customers) # Random chon 1-3 san pham selected_products = random.sample(products, random.randint(1, 3)) # Tinh tong gia san pham tong_gia_san_pham = sum(p.gia_ban or 0 for p in selected_products) # Random cac loai phi phi_mua_ho = tong_gia_san_pham * 0.05 # 5% phi mua ho phi_van_chuyen = random.randint(200000, 800000) # 200k-800k phi_khac = random.randint(0, 300000) # 0-300k tong_tien = tong_gia_san_pham + phi_mua_ho + phi_van_chuyen + phi_khac # Tao ma don hang ma_don_hang = f"FD{datetime.now().strftime('%y%m%d')}{i+1:03d}" # Random thoi gian tao (trong 30 ngay qua) ngay_tao = datetime.now() - timedelta(days=random.randint(0, 30)) order = DonHang( ma_don_hang=ma_don_hang, khach_hang_id=customer.id, tong_gia_san_pham=tong_gia_san_pham, phi_mua_ho=phi_mua_ho, phi_van_chuyen=phi_van_chuyen, phi_khac=phi_khac, tong_tien=tong_tien, trang_thai=random.choice(statuses), ngay_tao=ngay_tao, ngay_cap_nhat=ngay_tao + timedelta(hours=random.randint(1, 48)), ghi_chu_khach=f"Ghi chu tu khach hang cho don {ma_don_hang}", ghi_chu_noi_bo=f"Ghi chu noi bo cho don {ma_don_hang}" ) session.add(order) session.flush() # De lay ID cua order # Tao chi tiet don hang for product in selected_products: chi_tiet = ChiTietDonHang( don_hang_id=order.id, san_pham_id=product.id, so_luong=random.randint(1, 2), gia_mua=product.gia_ban, ghi_chu=f"Chi tiet cho san pham {product.ten_san_pham}" ) session.add(chi_tiet) orders.append(order) session.commit() print(f" Da tao {len(orders)} don hang demo!") return orders def create_demo_contact_history(customers): """ Tao lich su lien he demo""" session = Session() contact_types = ["call", "sms", "email"] nhan_vien_list = ["Nguyen Thi A", "Tran Van B", "Le Thi C", "Pham Van D"] contacts = [] for i in range(20): customer = random.choice(customers) loai_lien_he = random.choice(contact_types) # Noi dung mau theo loai lien he noi_dung_mau = { "call": [ "Goi xac nhan don hang, khach dong y thanh toan", "Tu van san pham cho khach, giai dap thac mac", "Thong bao hang ve kho, hen giao hang", "Xu ly khieu nai ve chat luong san pham" ], "sms": [ "Gui SMS xac nhan don hang va thong tin thanh toan", "Thong bao trang thai don hang qua SMS", "Gui ma tracking cho khach theo doi", "SMS nhac nho thanh toan don hang" ], "email": [ "Gui email bao gia chi tiet cho khach hang", "Email xac nhan don hang va huong dan thanh toan", "Gui hoa don va thong tin giao hang", "Email cam on va khuyen mai cho lan mua tiep theo" ] } ket_qua_mau = [ "Thanh cong, khach hai long", "Can follow up them", "Khach yeu cau them thong tin", "Da giai quyet xong van de", "Chuyen cho bo phan khac xu ly" ] ngay_lien_he = datetime.now() - timedelta(days=random.randint(0, 30)) contact = LichSuLienHe( khach_hang_id=customer.id, loai_lien_he=loai_lien_he, noi_dung=random.choice(noi_dung_mau[loai_lien_he]), nhan_vien_xu_ly=random.choice(nhan_vien_list), ket_qua=random.choice(ket_qua_mau), ngay_lien_he=ngay_lien_he ) session.add(contact) contacts.append(contact) session.commit() print(f" Da tao {len(contacts)} lich su lien he demo!") return contacts def main(): """ Ham chinh - Tao toan bo demo data""" print(" FADO CRM Demo Data Creator") print("=" * 40) try: # 1. Tao tables neu chua co print(" Dang tao database tables...") create_tables() # 2. Tao demo data print(" Dang tao khach hang demo...") customers = create_demo_customers() print(" Dang tao san pham demo...") products = create_demo_products() print(" Dang tao don hang demo...") orders = create_demo_orders(customers, products) print(" Dang tao lich su lien he demo...") contacts = create_demo_contact_history(customers) print("\n" + "=" * 40) print(" HO N TH NH T O DEMO DATA!") print("=" * 40) print(f" Khach hang: {len(customers)}") print(f" San pham: {len(products)}") print(f" Don hang: {len(orders)}") print(f" Lich su lien he: {len(contacts)}") print("\n Gio co the khoi dong server va test CRM!") except Exception as e: print(f" Loi khi tao demo data: {e}") sys.exit(1) if __name__ == "__main__": main()
