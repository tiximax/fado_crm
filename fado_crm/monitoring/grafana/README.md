# Grafana for FADO CRM\n\nThis directory contains provisioning for Grafana dashboards. Dashboards are auto-loaded from:\n\n- `monitoring/grafana/provisioning/dashboards/json/` (mounted to `/etc/grafana/provisioning/dashboards/json`)\n\n## Run stack\n\nUse Docker Compose from the repo root:\n\n```bash\n# Starts Postgres, Redis, Backend, Prometheus, Grafana\ndocker compose up -d\n```\n\nGrafana UI: http://localhost:3001\n\nDefault login (development only):\n- User: `admin`\n- Password: `admin`\n\nDashboards appear under folder: `FADO`.\n\n## Datasource\n\nPrometheus is exposed at `http://prometheus:9090` (Docker network). If the default Prometheus datasource is not present, add it manually in Grafana with that URL.\n\n## Metrics exposed\n\nThe backend exposes Prometheus metrics at `/performance/metrics`. Key metrics defined in `backend/performance_monitor.py` include:\n- `fado_http_requests_total{method, endpoint, status_code}`\n- `fado_http_request_duration_seconds_bucket{le, method, endpoint}` (with `_sum`, `_count` companions)\n- `fado_active_connections`\n- `fado_system_cpu_usage_percent`\n- `fado_system_memory_usage_percent`\n- `fado_database_connections`\n\n## Provisioning\n\nThe `dashboards.yml` points Grafana to load dashboard JSONs from `provisioning/dashboards/json`. Any new JSON dropped there will be picked up on Grafana restart.\n\n## Troubleshooting\n\n- If no data shows up, verify Prometheus can scrape the backend (`/performance/metrics`) and that the `backend` service is healthy.\n- Check Docker logs: `docker compose logs prometheus` and `docker compose logs grafana`.\n- Make sure timespan in the dashboard covers your activity window (e.g., `Last 6 hours`).\n